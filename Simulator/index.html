<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Power Spectrum</title>
	<link rel="stylesheet" href="media/css/ui.css" />
	<link rel="stylesheet" href="media/css/style.css" />
	<script src="media/js/jquery-1.10.0.min.js"></script>
	<script src="media/js/jquery-ui-1.10.3.custom.min.js"></script>
	<!--<link rel="stylesheet" href="/resources/demos/style.css" />-->
	<script>
	$(function() {

		/*
			Create a class to deal with our parameter slider instances
		*/
		function ParameterSlider(inp){

			// Keep the jQuery selector for the HTML select box
			this.select = inp.select;

			this.index = this.select[0].selectedIndex;

			// If a starting index is provided, we will use that instead
			if(typeof inp.index==="number" && parseFloat(inp.index) == parseInt(inp.index)){
				this.index = inp.index;
				// Update the select drop down
				this.select[0].selectedIndex = this.index;
			}

			this.updateOptsByIndex(this.index);

			// Is a callback provided for the change() function?
			if(typeof inp.change==="function"){
				var _obj = this;
				this.change = function(){ inp.change.call(_obj,{ value: _obj.value, id: _obj.select.attr('id')}); }
			}

			// Set up the slider - attaches jQuery UI functions
			this.init();
		}

		ParameterSlider.prototype.updateOptsByIndex = function(i){
			// Get the options
			this.opts = this.select.children().map(function() {return parseFloat($(this).val());}).get();

			// Keep a copy of the current index to check for a change
			var orig = this.index;

			// Set the index and value based on the index supplied
			this.index = (typeof i==="number") ? i : 0;
			this.value = this.opts[this.index];

			// Update the select drop down if necessary
			if(orig != this.index){
				this.select[0].selectedIndex = this.index;
			}
		}

		// Set up the jQuery UI slider and add some properties/callbacks to our variable.
		ParameterSlider.prototype.init = function(){
		
			var select = this.select;
			
			var _obj = this;

			this.slider = $( "<div id='"+_obj.select.attr('id')+"_slider'><\/div>" ).insertAfter( select ).slider({
				min: 1,
				max: this.opts.length,
				range: "min",
				value: _obj.index + 1,
				slide: function( event, ui ) {
					// Get the current values
					_obj.updateOptsByIndex(ui.value - 1);

					// Fire the callback
					_obj.change();
				}
			});

			this.select.change(function() {
				// If the select drop down is updated we need to update the slider
				// This shouldn't happen as it shouldn't be visible... but just in case.
				_obj.slider.slider( "value", this.selectedIndex + 1 );
			});

			// Hide the HTML selector element
			this.select.hide();
		};
		
		// Placeholder function to prevent errors if we call it without it being set
		ParameterSlider.prototype.change = function(){}




		// Set up the three Omega sliders
		var omega_b = new ParameterSlider({
			select: $("#omega_bs"),
			change: function(e){
				console.log(e)
			}
		});

		var omega_m = new ParameterSlider({
			select: $("#omega_cs"),
			change: function(e){
				console.log(e)
			}
		});

		var omega_l = new ParameterSlider({
			select: $("#omega_ls"),
			change: function(e){
				console.log(e)			
			}
		});

		
		
	});
	</script>
</head>
<body>

	<form id="omegas">
		<div id="omega_b">
			<label for="omega_bs">Omega<sub>b</sub></label>
			<select name="omega_bs" id="omega_bs">
				<option>0.0</option>
				<option selected="selected">0.05</option>
				<option>0.1</option>
				<option>0.15</option>
				<option>0.2</option>
				<option>0.25</option>
				<option>0.3</option>
				<option>0.35</option>
				<option>0.4</option>
				<option>0.45</option>
				<option>0.5</option>
				<option>0.55</option>
				<option>0.6</option>
				<option>0.65</option>
				<option>0.7</option>
				<option>0.75</option>
				<option>0.8</option>
				<option>0.85</option>
				<option>0.9</option>
				<option>0.95</option>
				<option>1.0</option>
			</select>
		</div>
		<div id="omega_c">
			<label for="omega_cs">Omega<sub>c</sub></label>
			<select name="omega_cs" id="omega_cs">
				<option>0.0</option>
				<option>0.05</option>
				<option>0.1</option>
				<option>0.15</option>
				<option>0.2</option>
				<option selected="selected">0.25</option>
				<option>0.3</option>
				<option>0.35</option>
				<option>0.4</option>
				<option>0.45</option>
				<option>0.5</option>
				<option>0.55</option>
				<option>0.6</option>
				<option>0.65</option>
				<option>0.7</option>
				<option>0.75</option>
				<option>0.8</option>
				<option>0.85</option>
				<option>0.9</option>
				<option>0.95</option>
				<option>1.0</option>
			</select>
		</div>
		<div id="omega_l">
			<label for="omega_ls">Omega<sub>&Lambda;</sub></label>
			<select name="omega_ls" id="omega_ls">
				<option>0.0</option>
				<option>0.05</option>
				<option>0.1</option>
				<option>0.15</option>
				<option>0.2</option>
				<option>0.25</option>
				<option>0.3</option>
				<option>0.35</option>
				<option>0.4</option>
				<option>0.45</option>
				<option>0.5</option>
				<option>0.55</option>
				<option>0.6</option>
				<option>0.65</option>
				<option selected="selected">0.7</option>
				<option>0.75</option>
				<option>0.8</option>
				<option>0.85</option>
				<option>0.9</option>
				<option>0.95</option>
				<option>1.0</option>
			</select>
		</div>
	</form>

</body>
</html>